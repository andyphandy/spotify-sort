(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){e.exports=a(36)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},30:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=(a(25),a(6)),o=(a(26),a(8),a(27),a(11)),i=a(7),u=a(5),m=a(9);function f(e){var t=e.accessToken,a=e.getUserId,c=e.logout,s=Object(n.useState)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEUAAACgoKCjo6Oqqqq0tLS+vr7Ly8unp6e7u7ve3t6ampr+/v7z8/Pl5eXZ2dnR0dHz7OghAAABa0lEQVR4nO3dTU4CQRhF0SqgAfGH/e9WB050IjHpdG5zTm3g3Xkl33h9e/+4n8/LslxPX47fLocf5v8d/nQ5PuL0iOW368s4jX277b5wKsyb47j1hJUp7FPYp7BPYZ/CvmcovGw9YWVzHLaesDKFfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8K++fX2TWGfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8I+hX3PULj/H0MK6xT2KexT2KewT2Gfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9inse4bC/d8o2f+dGYV1CvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr75jhtPWFlCvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr7FPbNsWw9YWUK+xT2KexT2KewT2Gfwj6FfXNct56wstt4uc09u90/AQvyBvXPGneWAAAAAElFTkSuQmCC"),f=Object(l.a)(s,2),d=f[0],h=f[1],A=Object(n.useState)(""),b=Object(l.a)(A,2),v=b[0],g=b[1];return Object(n.useEffect)((function(){fetch("/getMe",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(E).then((function(e){return e.json()})).then((function(e){var t=e.body;h(t.images[0].url),g(t.display_name.split(" ")[0]),a(t.id)})).catch(p)}),[]),r.a.createElement(o.a,{className:"my-4"},r.a.createElement(i.a,null,r.a.createElement(u.a,{xs:10,className:"d-flex align-items-center"},r.a.createElement("img",{src:d,alt:"Profile pic",id:"profile-pic",className:"mr-2"}),r.a.createElement("h2",null,"Welcome, ",v,"!")),r.a.createElement(u.a,{xs:2,className:"d-flex justify-content-end align-items-center"},r.a.createElement(m.a,{onClick:c},"Logout"))))}function E(e){if(e.ok)return e;throw Error("Error in request: "+e.statusText)}function p(e){console.log(e)}var d=a(16),h=a.n(d);a(29),a(30);function A(){return Object(n.useEffect)((function(){h.a.init({duration:2e3}),h.a.refresh()}),[]),r.a.createElement(o.a,{className:"my-5 text-center p-5"},r.a.createElement("h1",null,"SpotifySort."),r.a.createElement("p",{className:"mb-4"},"by Andy Phan"),r.a.createElement("a",{href:"/login"},r.a.createElement(m.a,{className:"my-4 btn-green"},"Login to Spotify")))}var b=a(10);function v(e){var t=e.userId,a=e.accessToken,c=e.onSubmit,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],f=i[1],E=Object(n.useState)(""),p=Object(l.a)(E,2),d=p[0],h=p[1];return Object(n.useEffect)((function(){t&&fetch("/playlists/getUserPlaylists",{method:"GET",headers:{Authorization:"Bearer ".concat(a)}}).then(g).then((function(e){return e.json()})).then((function(e){e=e.filter((function(e){return e.collaborative||e.owner.id===t})),f(e),e[0]&&h(e[0].id)})).catch(y)}),[t]),r.a.createElement(o.a,null,r.a.createElement(b.a,{onSubmit:function(e){return c(e,d)}},r.a.createElement(b.a.Group,{controlId:"form-playlist"},r.a.createElement(b.a.Label,null,"Choose one of your playlists:"),r.a.createElement(b.a.Control,{as:"select",value:d,onChange:function(e){return h(e.target.value)}},u.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(m.a,{type:"submit",className:"btn-primary w-100"},"Start")))}function g(e){if(e.ok)return e;throw Error("Error in request: "+e.statusText)}function y(e){console.log(e)}a(34);function x(e){var t=e.playlistId,a=e.accessToken,c=Object(n.useState)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEUAAACgoKCjo6Oqqqq0tLS+vr7Ly8unp6e7u7ve3t6ampr+/v7z8/Pl5eXZ2dnR0dHz7OghAAABa0lEQVR4nO3dTU4CQRhF0SqgAfGH/e9WB050IjHpdG5zTm3g3Xkl33h9e/+4n8/LslxPX47fLocf5v8d/nQ5PuL0iOW368s4jX277b5wKsyb47j1hJUp7FPYp7BPYZ/CvmcovGw9YWVzHLaesDKFfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8K++fX2TWGfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8I+hX3PULj/H0MK6xT2KexT2KewT2Gfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9inse4bC/d8o2f+dGYV1CvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr75jhtPWFlCvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr7FPbNsWw9YWUK+xT2KexT2KewT2Gfwj6FfXNct56wstt4uc09u90/AQvyBvXPGneWAAAAAElFTkSuQmCC"),s=Object(l.a)(c,2),o=s[0],m=s[1],f=Object(n.useState)("N/A"),E=Object(l.a)(f,2),p=E[0],d=E[1],h=Object(n.useState)("N/A"),A=Object(l.a)(h,2),b=A[0],v=A[1],g=Object(n.useState)(0),y=Object(l.a)(g,2),x=y[0],P=y[1],w=Object(n.useState)(0),C=Object(l.a)(w,2),O=C[0],N=C[1];return Object(n.useEffect)((function(){""!==t&&fetch("/playlists/getPlaylist?playlistId=".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}}).then(T).then((function(e){return e.json()})).then((function(e){var t=e.body;t.images[0]?m(t.images[0].url):m("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEUAAACgoKCjo6Oqqqq0tLS+vr7Ly8unp6e7u7ve3t6ampr+/v7z8/Pl5eXZ2dnR0dHz7OghAAABa0lEQVR4nO3dTU4CQRhF0SqgAfGH/e9WB050IjHpdG5zTm3g3Xkl33h9e/+4n8/LslxPX47fLocf5v8d/nQ5PuL0iOW368s4jX277b5wKsyb47j1hJUp7FPYp7BPYZ/CvmcovGw9YWVzHLaesDKFfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8K++fX2TWGfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9insU9insE9hn8I+hX3PULj/H0MK6xT2KexT2KewT2Gfwj6FfQr7FPYp7FPYp7BPYZ/CPoV9CvsU9inse4bC/d8o2f+dGYV1CvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr75jhtPWFlCvsU9insU9insE9hn8I+hX0K+xT2KexT2KewT2Gfwj6FfQr7FPbNsWw9YWUK+xT2KexT2KewT2Gfwj6FfXNct56wstt4uc09u90/AQvyBvXPGneWAAAAAElFTkSuQmCC"),d(t.name),v(t.owner.display_name),P(t.followers.total),N(t.tracks.total)})).catch(j)}),[t]),r.a.createElement(i.a,{className:"info d-flex align-items-center"},r.a.createElement(u.a,{xs:1},r.a.createElement("img",{src:o,alt:"Playlist pic",className:"my-2",id:"playlist-img"})),r.a.createElement(u.a,{xs:3},r.a.createElement("h2",{className:"header"},"PLAYLIST"),r.a.createElement("p",{className:"mb-0"},p)),r.a.createElement(u.a,{xs:3},r.a.createElement("h2",{className:"header"},"CREATED BY"),r.a.createElement("p",{className:"mb-0"},b)),r.a.createElement(u.a,{xs:{span:1,offset:3},className:"text-center"},r.a.createElement("h2",{className:"header"},"FOLLOWERS"),r.a.createElement("p",{className:"mb-0"},x)),r.a.createElement(u.a,{xs:1,className:"text-center"},r.a.createElement("h2",{className:"header"},"SONGS"),r.a.createElement("p",{className:"mb-0"},O)))}function T(e){if(e.ok)return e;throw Error("Error in request: "+e.statusText)}function j(e){console.log(e)}function P(){return r.a.createElement(i.a,{className:"info pt-2 text-center d-flex align-items-center border-top-0"},r.a.createElement(u.a,{xs:1},r.a.createElement("h3",{className:"header px-0"},"#")),r.a.createElement(u.a,{xs:3,className:"text-left"},r.a.createElement("h3",{className:"header px-0"},"TITLE"),r.a.createElement("h3",{className:"header px-0"},"ARTIST")),r.a.createElement(u.a,{xs:2},r.a.createElement("h3",{className:"header px-0 text-left"},"RELEASE DATE")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"POPULARITY")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"DANCEABILITY")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"ENERGY")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"KEY")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"TEMPO")),r.a.createElement(u.a,null,r.a.createElement("h3",{className:"header px-0"},"MOOD")))}a(35);var w=a(17);function C(e){var t=e.accessToken,a=e.playlistId,c=e.info,s=e.setInfo,l={method:"GET",headers:{Authorization:"Bearer ".concat(t)}};return Object(n.useEffect)((function(){a&&fetch("/playlists/getPlaylistTracks?playlistId=".concat(a),l).then(N).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.track})),a=JSON.stringify(t.map((function(e){return e.id})));return fetch("/tracks/getAudioFeatures?tracks=".concat(a),l).then(N).then((function(e){return e.json()})).then((function(e){for(var a=[],n=0;n<e.length;n++)a.push({track:t[n],features:e[n]});s(a)}))})).catch(k)}),[a]),r.a.createElement(i.a,null,r.a.createElement(u.a,{className:"px-0"},r.a.createElement(w.a,{as:"ol"},c.map((function(e,t){return r.a.createElement(O,{track:e.track,features:e.features,index:t,key:e.track.id})})))))}function O(e){var t=e.track,a=e.features,n=e.index;return t&&a?r.a.createElement(w.a.Item,{as:"li"},r.a.createElement(i.a,{className:"d-flex text-right align-items-center"},r.a.createElement(u.a,{xs:1},r.a.createElement("p",{className:"mb-0 px-0 text-center"},n+1,".")),r.a.createElement(u.a,{xs:3,className:"text-left"},r.a.createElement("p",{className:"mb-0 px-0 font-weight-bold"},t.name),r.a.createElement("p",{className:"mb-0 px-0"},function(e){var t="by ";return e.forEach((function(e){t+=e.name+", "})),t.slice(0,t.length-2)}(t.artists))),r.a.createElement(u.a,{xs:2},r.a.createElement("p",{className:"mb-0 px-0 text-left"},t.album.release_date)),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},t.popularity)),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},a.danceability)),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},a.energy)),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},["C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab","A","A#/Bb","B","cm","c#/db","dm","d#/eb","em","fm","f#/gb","gm","g#/ab","am","a#/bb","bm"][function(e){return e.key+12*(1===e.mode?0:1)}(a)])),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},2*Math.round(a.tempo/2))),r.a.createElement(u.a,null,r.a.createElement("p",{className:"mb-0 px-0"},a.valence)))):r.a.createElement("div",null)}function N(e){if(e.ok)return e;throw Error("Error in request: "+e.statusText)}function k(e){console.log(e)}function F(e){var t=e.sort;return r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{controlId:"form-sort"},r.a.createElement(b.a.Control,{as:"select",onChange:function(e){e.preventDefault(),t(e.target.value)}},r.a.createElement("option",{value:"title-0"},"Title Ascending"),r.a.createElement("option",{value:"title-1"},"Title Descending"),r.a.createElement("option",{value:"artist-0"},"Artist Ascending"),r.a.createElement("option",{value:"artist-1"},"Artist Descending"),r.a.createElement("option",{value:"date-0"},"Release Date Ascending"),r.a.createElement("option",{value:"date-1"},"Release Date Descending"),r.a.createElement("option",{value:"popularity-0"},"Popularity Ascending"),r.a.createElement("option",{value:"popularity-1"},"Popularity Descending"),r.a.createElement("option",{value:"dance-0"},"Danceability Ascending"),r.a.createElement("option",{value:"dance-1"},"Danceability Descending"),r.a.createElement("option",{value:"energy-0"},"Energy Ascending"),r.a.createElement("option",{value:"energy-1"},"Energy Descending"),r.a.createElement("option",{value:"key-0"},"Key Ascending"),r.a.createElement("option",{value:"key-1"},"Key Descending"),r.a.createElement("option",{value:"tempo-0"},"Tempo Ascending"),r.a.createElement("option",{value:"tempo-1"},"Tempo Descending"),r.a.createElement("option",{value:"mood-0"},"Mood Ascending"),r.a.createElement("option",{value:"mood-1"},"Mood Descending"))))}function K(e){var t=e.playlistId,a=e.accessToken,c=e.userId,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],f=i[1],E=Object(n.useState)(!1),p=Object(l.a)(E,2),d=p[0],h=p[1],A=Object(n.useState)("Create copy playlist!"),b=Object(l.a)(A,2),v=b[0],g=b[1];Object(n.useEffect)((function(){g("Create copy playlist!"),h(!0)}),[u]);var y=function(e){var t=u.slice(),a=e.slice(0,u.indexOf("-")-1),n=0===parseInt(e[e.length-1]);switch(a){case"title":U(t,n,"track","name");break;case"artist":!function(e,t){t?e.sort((function(e,t){return B(e,t)})):e.sort((function(e,t){return B(t,e)}))}(t,n);break;case"date":U(t,n,"track","album","release_date");break;case"popularity":S(t,n,"track","popularity");break;case"dance":S(t,n,"features","danceability");break;case"energy":S(t,n,"features","energy");break;case"key":S(t,n,"features","key");break;case"tempo":S(t,n,"features","tempo");break;case"mood":S(t,n,"features","valence");break;default:throw new Error("Could not identify category")}f(t),h(!0)};return r.a.createElement(o.a,{className:"mt-5"},r.a.createElement(F,{sort:function(e){return y(e)}}),r.a.createElement(m.a,{className:"w-100 mb-5 btn-primary",onClick:function(){g("Creating..."),h(!1);var e=new FormData;e.append("id",c),fetch("/playlists/createPlaylist",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:e}).then(D).then((function(e){return e.json()})).then((function(e){var t=e.body.id,n=[];u.forEach((function(e){n.push(e.track.uri)}));var r=new FormData;return r.append("id",t),r.append("trackUris",JSON.stringify(n)),fetch("/playlists/addToPlaylist",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:r}).then(D).then((function(){g("Success!")}))})).catch(Q)},disabled:!d},v),r.a.createElement(x,{playlistId:t,accessToken:a}),r.a.createElement(P,null),r.a.createElement(C,{playlistId:t,accessToken:a,info:u,setInfo:f}))}function U(e,t,a,n,r){t?void 0===r?e.sort((function(e,t){return G(e,t,a,n)})):e.sort((function(e,t){return I(e,t,a,n,r)})):void 0===r?e.sort((function(e,t){return G(t,e,a,n)})):e.sort((function(e,t){return I(t,e,a,n,r)}))}function S(e,t,a,n){t?e.sort((function(e,t){return Y(e,t,a,n)})):e.sort((function(e,t){return Y(t,e,a,n)}))}function Y(e,t,a,n){var r=e[a][n],c=t[a][n];return r<c?-1:r>c?1:0}function G(e,t,a,n){var r=e[a][n].replace(/[^A-Za-z0-9]+/,"").toLowerCase(),c=t[a][n].replace(/[^A-Za-z0-9]+/,"").toLowerCase();return r<c?-1:r>c?1:0}function I(e,t,a,n,r){var c=e[a][n][r].replace(/[^A-Za-z0-9]+/,"").toLowerCase(),s=t[a][n][r].replace(/[^A-Za-z0-9]+/,"").toLowerCase();return c<s?-1:c>s?1:0}function B(e,t){var a=L(e.track.artists).replace(/[^A-Za-z0-9]+/,"").toLowerCase(),n=L(t.track.artists).replace(/[^A-Za-z0-9]+/,"").toLowerCase();return a<n?-1:a>n?1:0}function L(e){var t="";return e.forEach((function(e){t+=e.name+", "})),t.slice(0,t.length-2)}function D(e){if(e.ok)return e;throw Error("Error in request: "+e.statusText)}function Q(e){console.log(e)}function X(){var e=Object(n.useState)(void 0),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),E=Object(l.a)(m,2),p=E[0],d=E[1],h=Object(n.useState)(""),b=Object(l.a)(h,2),g=b[0],y=b[1];return Object(n.useEffect)((function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.history.replaceState(null,null," "),u("undefined"!==typeof e.access_token),c(e.access_token)}),[]),i?r.a.createElement("div",null,r.a.createElement(f,{accessToken:a,getUserId:function(e){return function(e){d(e)}(e)},logout:function(){c(void 0),u(!1),d(""),y("")}}),r.a.createElement("hr",null),r.a.createElement(v,{userId:p,accessToken:a,onSubmit:function(e,t){return function(e,t){e.preventDefault(),y(t)}(e,t)}}),r.a.createElement(K,{accessToken:a,playlistId:g,userId:p})):r.a.createElement(A,null)}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.abbe5211.chunk.js.map